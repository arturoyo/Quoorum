<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Forum Debate Viewer - Demo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: #f3f4f6;
      height: 100vh;
      overflow: hidden;
    }

    .container {
      display: flex;
      height: 100vh;
    }

    /* Left Panel - Debate List */
    .debate-list {
      width: 380px;
      background: white;
      border-right: 1px solid #e5e7eb;
      display: flex;
      flex-direction: column;
    }

    .search-bar {
      padding: 16px;
      border-bottom: 1px solid #e5e7eb;
    }

    .search-input {
      width: 100%;
      padding: 10px 12px 10px 36px;
      background: #f3f4f6;
      border: none;
      border-radius: 8px;
      font-size: 14px;
    }

    .search-input:focus {
      outline: 2px solid #3b82f6;
    }

    .debate-items {
      flex: 1;
      overflow-y: auto;
    }

    .debate-item {
      padding: 16px;
      border-bottom: 1px solid #f3f4f6;
      cursor: pointer;
      transition: background 0.2s;
    }

    .debate-item:hover {
      background: #f9fafb;
    }

    .debate-item.selected {
      background: #eff6ff;
    }

    .debate-title {
      display: flex;
      justify-content: space-between;
      align-items: start;
      margin-bottom: 8px;
    }

    .debate-question {
      font-weight: 600;
      font-size: 14px;
      color: #111827;
      flex: 1;
    }

    .debate-option {
      margin-left: 8px;
      padding: 2px 8px;
      background: #dbeafe;
      color: #1e40af;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 500;
    }

    .expert-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
    }

    .expert-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 500;
    }

    .expert-badge.gtm {
      background: #10b98120;
      color: #10b981;
      border: 1px solid #10b98140;
    }

    .expert-badge.pricing {
      background: #3b82f620;
      color: #3b82f6;
      border: 1px solid #3b82f640;
    }

    .expert-badge.product {
      background: #a855f720;
      color: #a855f7;
      border: 1px solid #a855f740;
    }

    .debate-metrics {
      display: flex;
      gap: 8px;
      font-size: 11px;
      color: #6b7280;
      margin-bottom: 6px;
    }

    .debate-timestamp {
      font-size: 11px;
      color: #9ca3af;
    }

    /* Right Panel - Chat */
    .debate-chat {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: #f9fafb;
    }

    .chat-header {
      background: white;
      border-bottom: 1px solid #e5e7eb;
      padding: 16px;
    }

    .chat-question {
      font-size: 18px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 12px;
    }

    .chat-experts {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 12px;
    }

    .chat-metrics {
      display: flex;
      gap: 24px;
      font-size: 13px;
    }

    .metric {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .metric-label {
      color: #6b7280;
    }

    .progress-bar {
      width: 96px;
      height: 8px;
      background: #e5e7eb;
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      transition: width 0.3s;
    }

    .progress-fill.green {
      background: #10b981;
    }

    .progress-fill.blue {
      background: #3b82f6;
    }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
    }

    .round-group {
      margin-bottom: 24px;
    }

    .round-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .round-line {
      flex: 1;
      height: 1px;
      background: #d1d5db;
    }

    .round-label {
      font-size: 13px;
      font-weight: 500;
      color: #6b7280;
    }

    .message {
      background: white;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 12px;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      border: 1px solid #f3f4f6;
    }

    .message-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .message-expert {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .expert-name {
      font-weight: 600;
      color: #111827;
    }

    .expert-category {
      font-size: 11px;
      color: #6b7280;
    }

    .message-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      color: #9ca3af;
    }

    .message-content {
      color: #374151;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .intervention {
      background: #fef3c7;
      border: 1px solid #fde68a;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 12px;
    }

    .intervention-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .intervention-title {
      font-weight: 600;
      color: #92400e;
    }

    .intervention-type {
      padding: 2px 8px;
      background: #fde68a;
      color: #92400e;
      border-radius: 4px;
      font-size: 11px;
    }

    .intervention-content {
      color: #92400e;
    }

    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      color: #9ca3af;
    }

    .empty-icon {
      font-size: 64px;
      margin-bottom: 16px;
    }

    .empty-text {
      font-size: 18px;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Left Panel -->
    <div class="debate-list">
      <div class="search-bar">
        <input type="text" class="search-input" placeholder="üîç Search debates..." id="searchInput">
      </div>
      <div class="debate-items" id="debateList">
        <!-- Debates will be inserted here -->
      </div>
    </div>

    <!-- Right Panel -->
    <div class="debate-chat" id="debateChat">
      <div class="empty-state">
        <div class="empty-icon">üí¨</div>
        <div class="empty-text">Select a debate to view</div>
      </div>
    </div>
  </div>

  <script>
    // Mock data
    const debates = [
      {
        id: 'session-1',
        question: '¬øDebo lanzar Wallie a 29‚Ç¨, 49‚Ç¨ o 79‚Ç¨?',
        shortQuestion: 'üìä Pricing Decision',
        topOption: '49‚Ç¨',
        experts: [
          { id: 'patrick', name: 'Patrick', category: 'pricing', emoji: 'üîµ' },
          { id: 'alex', name: 'Alex', category: 'pricing', emoji: 'üîµ' },
          { id: 'april', name: 'April', category: 'gtm', emoji: 'üü¢' },
        ],
        rounds: 5,
        cost: 0.23,
        consensus: 95,
        quality: 85,
        timestamp: '2 hours ago',
        messages: [
          {
            round: 1,
            expert: 'Patrick Campbell',
            category: 'pricing',
            emoji: 'üîµ',
            content: 'Recomiendo 49‚Ç¨ porque:\\n\\n‚Ä¢ ROI claro para el cliente\\n‚Ä¢ Competitivo vs alternativas\\n‚Ä¢ Permite escalar',
            time: '12:34 PM',
            depth: 82
          },
          {
            round: 1,
            expert: 'Alex Hormozi',
            category: 'pricing',
            emoji: 'üîµ',
            content: 'Desde perspectiva de valor:\\n\\n49‚Ç¨ comunica premium sin ser prohibitivo',
            time: '12:35 PM',
            depth: 78
          },
          {
            round: 2,
            isIntervention: true,
            type: 'challenge_depth',
            content: '‚ö†Ô∏è Necesito m√°s profundidad en el an√°lisis. ¬øQu√© datos cuantitativos respaldan 49‚Ç¨?',
            time: '12:36 PM'
          }
        ]
      },
      {
        id: 'session-2',
        question: '¬øC√≥mo posicionar Wallie: "WhatsApp CRM" o "AI Sales Assistant"?',
        shortQuestion: 'üéØ Positioning Strategy',
        topOption: 'AI Assistant',
        experts: [
          { id: 'april', name: 'April', category: 'gtm', emoji: 'üü¢' },
          { id: 'peep', name: 'Peep', category: 'gtm', emoji: 'üü¢' },
        ],
        rounds: 7,
        cost: 0.31,
        consensus: 87,
        quality: 82,
        timestamp: 'Yesterday',
        messages: []
      },
      {
        id: 'session-3',
        question: '¬øQu√© feature construir primero: Forum, Voice Analytics, o AI Coaching?',
        shortQuestion: 'üöÄ Roadmap Priority',
        topOption: 'Forum',
        experts: [
          { id: 'rahul', name: 'Rahul', category: 'product', emoji: 'üü£' },
          { id: 'lenny', name: 'Lenny', category: 'product', emoji: 'üü£' },
        ],
        rounds: 4,
        cost: 0.18,
        consensus: 78,
        quality: 75,
        timestamp: '3 days ago',
        messages: []
      }
    ];

    let selectedDebateId = null;

    // Render debate list
    function renderDebateList() {
      const listEl = document.getElementById('debateList');
      listEl.innerHTML = debates.map(debate => `
        <div class="debate-item ${selectedDebateId === debate.id ? 'selected' : ''}" onclick="selectDebate('${debate.id}')">
          <div class="debate-title">
            <div class="debate-question">${debate.shortQuestion}</div>
            <div class="debate-option">${debate.topOption}</div>
          </div>
          <div class="expert-badges">
            ${debate.experts.map(e => `
              <div class="expert-badge ${e.category}">
                <span>${e.emoji}</span>
                <span>${e.name}</span>
              </div>
            `).join('')}
          </div>
          <div class="debate-metrics">
            <span>${debate.rounds} rounds</span>
            <span>‚Ä¢</span>
            <span>$${debate.cost.toFixed(2)}</span>
            <span>‚Ä¢</span>
            <span>${debate.consensus}% ${debate.consensus >= 90 ? 'üéØ' : '‚úÖ'}</span>
          </div>
          <div class="debate-timestamp">${debate.timestamp}</div>
        </div>
      `).join('');
    }

    // Select debate
    function selectDebate(id) {
      selectedDebateId = id;
      renderDebateList();
      renderDebateChat(id);
    }

    // Render debate chat
    function renderDebateChat(id) {
      const debate = debates.find(d => d.id === id);
      const chatEl = document.getElementById('debateChat');

      if (!debate) return;

      chatEl.innerHTML = `
        <div class="chat-header">
          <div class="chat-question">${debate.question}</div>
          <div class="chat-experts">
            ${debate.experts.map(e => `
              <div class="expert-badge ${e.category}">
                <span>${e.emoji}</span>
                <span>${e.name}</span>
                <span class="expert-category">(${e.category})</span>
              </div>
            `).join('')}
          </div>
          <div class="chat-metrics">
            <div class="metric">
              <span class="metric-label">Quality:</span>
              <div class="progress-bar">
                <div class="progress-fill green" style="width: ${debate.quality}%"></div>
              </div>
              <span>${debate.quality}/100 ${debate.quality >= 80 ? '‚ú®' : 'üëç'}</span>
            </div>
            <div class="metric">
              <span class="metric-label">Consensus:</span>
              <div class="progress-bar">
                <div class="progress-fill blue" style="width: ${debate.consensus}%"></div>
              </div>
              <span>${debate.consensus}% ${debate.consensus >= 90 ? 'üéØ' : '‚úÖ'}</span>
            </div>
            <div class="metric">
              <span>üí∞ $${debate.cost.toFixed(3)}</span>
            </div>
            <div class="metric">
              <span>üîÑ ${debate.rounds} rounds</span>
            </div>
          </div>
        </div>
        <div class="chat-messages">
          ${renderMessages(debate.messages)}
        </div>
      `;
    }

    // Render messages
    function renderMessages(messages) {
      if (messages.length === 0) {
        return '<div class="empty-state"><div class="empty-icon">üì≠</div><div class="empty-text">No messages yet</div></div>';
      }

      const rounds = {};
      messages.forEach(msg => {
        if (!rounds[msg.round]) rounds[msg.round] = [];
        rounds[msg.round].push(msg);
      });

      return Object.entries(rounds).map(([round, msgs]) => `
        <div class="round-group">
          <div class="round-header">
            <div class="round-line"></div>
            <div class="round-label">Round ${round}</div>
            <div class="round-line"></div>
          </div>
          ${msgs.map(msg => msg.isIntervention ? `
            <div class="intervention">
              <div class="intervention-header">
                <span>ü§ñ</span>
                <span class="intervention-title">Meta-Moderator Intervention</span>
                <span class="intervention-type">${msg.type}</span>
              </div>
              <div class="intervention-content">${msg.content}</div>
            </div>
          ` : `
            <div class="message">
              <div class="message-header">
                <div class="message-expert">
                  <span>${msg.emoji}</span>
                  <span class="expert-name">${msg.expert}</span>
                  <span class="expert-category">(${msg.category})</span>
                </div>
                <div class="message-meta">
                  <span>${msg.time}</span>
                  <span>‚≠ê Depth: ${msg.depth}</span>
                </div>
              </div>
              <div class="message-content">${msg.content}</div>
            </div>
          `).join('')}
        </div>
      `).join('');
    }

    // Search
    document.getElementById('searchInput').addEventListener('input', (e) => {
      const query = e.target.value.toLowerCase();
      // In real app, filter debates
      console.log('Search:', query);
    });

    // Initial render
    renderDebateList();
  </script>
</body>
</html>
